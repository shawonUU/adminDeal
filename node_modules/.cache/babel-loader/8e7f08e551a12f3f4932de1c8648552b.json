{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      auth: {\n        isAuthenticated: false,\n        user: {}\n      },\n      purchaseHistories: [],\n      currentPage: 1,\n      historyHolder: []\n    };\n  },\n\n  created() {\n    var user = localStorage.getItem(\"user\");\n\n    if (user !== null) {\n      user = JSON.parse(user);\n      this.auth.isAuthenticated = true;\n      this.auth.user = user;\n    }\n\n    this.getPurchaseHistory();\n  },\n\n  methods: {\n    getPurchaseHistory(page) {\n      const csrfToken = document.head.querySelector('meta[name=\"csrf-token\"]').content;\n      axios.defaults.headers.common['X-CSRF-TOKEN'] = csrfToken;\n\n      if (!this.historyHolder[page]) {\n        axios.get(this.selfDomain + \"vueweb/purchase_history?page=\" + page, {\n          headers: {\n            token: this.auth.user.access_token,\n            Authorization: \"Bearer \" + this.auth.user.access_token\n          }\n        }).then(res => {\n          this.historyHolder[page];\n          this.purchaseHistories = res.data[0].data;\n          console.log(res.data[0]);\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    } // paymentStatus(status){\n    //     console.log(status);\n    // }\n\n\n  }\n};","map":{"version":3,"mappings":"AA6FA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAe;EACbC,IAAI,GAAE;IACJ,OAAM;MACFC,IAAI,EAAC;QACCC,eAAe,EAAE,KADlB;QAECC,IAAI,EAAE;MAFP,CADH;MAKFC,iBAAiB,EAAC,EALhB;MAMFC,WAAW,EAAC,CANV;MAOFC,aAAa,EAAC;IAPZ,CAAN;EAUD,CAZY;;EAabC,OAAO,GAAE;IACH,IAAIJ,IAAG,GAAIK,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX;;IACA,IAAGN,IAAG,KAAM,IAAZ,EAAiB;MACbA,IAAG,GAAIO,IAAI,CAACC,KAAL,CAAWR,IAAX,CAAP;MACA,KAAKF,IAAL,CAAUC,eAAV,GAA4B,IAA5B;MACA,KAAKD,IAAL,CAAUE,IAAV,GAAiBA,IAAjB;IACJ;;IACA,KAAKS,kBAAL;EACH,CArBU;;EAsBbC,OAAO,EAAE;IACPD,kBAAkB,CAACE,IAAD,EAAM;MACpB,MAAMC,SAAQ,GAAIC,QAAQ,CAACC,IAAT,CAAcC,aAAd,CAA4B,yBAA5B,EAAuDC,OAAzE;MACApB,KAAK,CAACqB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,cAA9B,IAAgDP,SAAhD;;MACJ,IAAG,CAAC,KAAKT,aAAL,CAAmBQ,IAAnB,CAAJ,EAA6B;QACzBf,KAAK,CAACwB,GAAN,CAAU,KAAKC,UAAL,GAAgB,+BAAhB,GAAgDV,IAA1D,EAA+D;UAC/DO,OAAO,EAAE;YACGI,KAAK,EAAE,KAAKxB,IAAL,CAAUE,IAAV,CAAeuB,YADzB;YAEGC,aAAa,EAAE,YAAY,KAAK1B,IAAL,CAAUE,IAAV,CAAeuB;UAF7C;QADsD,CAA/D,EAKCE,IALD,CAKOC,GAAD,IAAO;UACb,KAAKvB,aAAL,CAAmBQ,IAAnB;UACA,KAAKV,iBAAL,GAAyByB,GAAG,CAAC7B,IAAJ,CAAS,CAAT,EAAYA,IAArC;UACA8B,OAAO,CAACC,GAAR,CAAYF,GAAG,CAAC7B,IAAJ,CAAS,CAAT,CAAZ;QACD,CATC,EASCgC,KATD,CASQC,GAAD,IAAO;UACbH,OAAO,CAACC,GAAR,CAAYE,GAAZ;QACF,CAXC;MAYJ;IAEC,CAnBM,CAoBP;IACA;IACA;;;EAtBO;AAtBI,CAAf","names":["axios","data","auth","isAuthenticated","user","purchaseHistories","currentPage","historyHolder","created","localStorage","getItem","JSON","parse","getPurchaseHistory","methods","page","csrfToken","document","head","querySelector","content","defaults","headers","common","get","selfDomain","token","access_token","Authorization","then","res","console","log","catch","err"],"sourceRoot":"","sources":["F:\\adminDeal\\src\\components\\pages\\user\\purchase_history.vue"],"sourcesContent":["<template>\r\n  <h3>Purchase History</h3>\r\n  <div class=\"card-body\">\r\n                <table class=\"table mb-0\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Code</th>\r\n                            <th data-breakpoints=\"md\">Date</th>\r\n                            <th>Amount</th>\r\n                            <th data-breakpoints=\"md\">Delivery Status</th>\r\n                            <th data-breakpoints=\"md\">Payment Status</th>\r\n                            <th data-breakpoints=\"md\">Objection</th>\r\n                            <th class=\"text-right\">Options</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <!-- @foreach ($orders as $key => $order)\r\n                            @if (count($order->orderDetails) > 0) -->\r\n                                <tr v-for=\"(purchaseHistory,index) in purchaseHistories\" :key=\"index\">\r\n                                    <!-- <td>\r\n                                        <a href=\"{{route('purchase_history.details', encrypt($order->id))}}\">{{ $order->code }}</a>\r\n                                    </td> -->\r\n                                    <td>\r\n                                        <a href=\"\">{{ purchaseHistory.code }}</a>\r\n                                    </td>\r\n                                    <!-- <td>{{ date('d-m-Y', $order->date) }}</td> -->\r\n                                    <td>{{ purchaseHistory.date }}</td>\r\n\r\n                                    <!-- <td>\r\n                                        {{ single_price($order->grand_total) }}\r\n                                    </td> -->\r\n                                    <td>\r\n                                        {{ purchaseHistory.grand_total }}\r\n                                    </td>\r\n                                    <!-- <td>\r\n                                        {{ translate(ucfirst(str_replace('_', ' ', $order->delivery_status))) }}\r\n                                        @if($order->delivery_viewed == 0)\r\n                                            <span class=\"ml-2\" style=\"color:green\"><strong>*</strong></span>\r\n                                        @endif\r\n                                    </td> -->\r\n                                      <td>\r\n                                       {{ purchaseHistory.delivery_status   }}                                   \r\n                                        <span v-if=\"purchaseHistory.delivery_viewed==0\" class=\"ml-2\" style=\"color:green\"><strong>*</strong></span>                                      \r\n                                     </td>\r\n                                     <td>\r\n                                         <span :class=\"purchaseHistory.payment_status=='unpaid'?'badge badge-inline badge-danger':'badge badge-inline badge-success'\">{{ purchaseHistory.payment_status=='unpaid'?'unpaid':'paid' }}</span>                               \r\n                                         <span class=\"ml-2\" style=\"color:green\"><strong>*</strong></span>                                     \r\n                                    </td>\r\n                                    <td>\r\n\r\n                                    </td>\r\n                                    <td>\r\n                                      \r\n                                    </td>\r\n                                    <td>\r\n                                     \r\n                                        <a  v-if=\"purchaseHistory.dontpay==null&&purchaseHistory.payment_status=='paid'&&purchaseHistory.delivery_status== 'delivered' && purchaseHistory.diffdate<2\" href=\"\">\r\n                                            <b>Dont Pay Seller</b> \r\n                                        </a> \r\n                                      \r\n                                          <a class=\"text-success\" v-if=\"purchaseHistory.dontpay!=null&&purchaseHistory.payment_status=='paid' && purchaseHistory.delivery_status== 'delivered' && purchaseHistory.diffdate<2\" href=\"\"> <span class=\"text-reset fw-600\"> Withdraw Objection</span> \r\n                                        </a>\r\n                                         \r\n                                    </td>\r\n                                    <td class=\"text-right\">\r\n                                        \r\n                                        <a v-if=\"purchaseHistory.delivery_status== 'pending' && purchaseHistory.payment_status=='unpaid'\" href=\"javascript:void(0)\" class=\"btn btn-soft-danger btn-icon btn-circle btn-sm confirm-delete\" data-href=\"\" title=\"Cancel\">\r\n                                            <i class=\"las la-trash\"></i>\r\n                                        </a>\r\n                                        <a href=\"\" class=\"btn btn-soft-info btn-icon btn-circle btn-sm\" title=\"Order Details\">\r\n                                            <i class=\"las la-eye\"></i>\r\n                                        </a>\r\n                                        <a class=\"btn btn-soft-warning btn-icon btn-circle btn-sm\" href=\"\" title=\"Download Invoice\">\r\n                                            <i class=\"las la-download\"></i>\r\n                                        </a>\r\n                                    </td>\r\n                                </tr>\r\n                           \r\n                    </tbody>\r\n                </table>\r\n                <div class=\"aiz-pagination\">\r\n                    <vue-awesome-paginate\r\n                    :total-items=\"lastPage\"\r\n                    :items-per-page=\"12\"\r\n                    :max-pages-shown=\"5\"\r\n                    v-model=\"currentPage\"\r\n                    @click=\"getBlogs\"\r\n                    />\r\n              \t</div>\r\n            </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n  data(){\r\n    return{\r\n        auth:{\r\n              isAuthenticated: false,\r\n              user: {},\r\n          },\r\n        purchaseHistories:[],\r\n        currentPage:1,\r\n        historyHolder:[],\r\n        \r\n    }\r\n  },\r\n  created(){\r\n        var user = localStorage.getItem(\"user\");\r\n        if(user !== null){\r\n            user = JSON.parse(user);\r\n            this.auth.isAuthenticated = true;\r\n            this.auth.user = user;\r\n        }\r\n        this.getPurchaseHistory();\r\n    },\r\n  methods: {\r\n    getPurchaseHistory(page){\r\n        const csrfToken = document.head.querySelector('meta[name=\"csrf-token\"]').content;\r\n        axios.defaults.headers.common['X-CSRF-TOKEN'] = csrfToken;\r\n    if(!this.historyHolder[page]){\r\n        axios.get(this.selfDomain+\"vueweb/purchase_history?page=\"+page,{\r\n        headers: {\r\n                    token: this.auth.user.access_token,\r\n                    Authorization: \"Bearer \" + this.auth.user.access_token,\r\n                }\r\n      }).then((res)=>{\r\n        this.historyHolder[page]\r\n        this.purchaseHistories = res.data[0].data\r\n        console.log(res.data[0]);\r\n      }).catch((err)=>{\r\n         console.log(err)\r\n      })\r\n    }\r\n      \r\n    },\r\n    // paymentStatus(status){\r\n    //     console.log(status);\r\n    // }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}