{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      auth: {\n        isAuthenticated: false,\n        user: {}\n      },\n      coordinate: {\n        lat: 0,\n        lan: 0\n      },\n      countries: [],\n      states: [],\n      cities: []\n    };\n  },\n\n  created() {\n    var user = localStorage.getItem(\"user\");\n\n    if (user !== null) {\n      user = JSON.parse(user);\n      this.auth.isAuthenticated = true;\n      this.auth.user = user;\n      let ele = document.getElementsByTagName('body');\n      ele[0].classList.add(\"modal-open\");\n      this.getAddressInfo(); // this.getMap();\n    }\n  },\n\n  methods: {\n    hidModal() {\n      this.emitter.emit(\"addressModal\", false);\n      let ele = document.getElementsByTagName('body');\n      ele[0].classList.remove(\"modal-open\");\n    },\n\n    getAddressInfo() {\n      axios.get(this.selfDomain + \"vueweb/checkout/get/address-info\", {\n        headers: {\n          Authorization: \"Bearer \" + this.auth.user.access_token\n        }\n      }).then(response => {\n        this.countries = response.data;\n      });\n    },\n\n    get_states() {\n      countryId = document.getElementById(\"countryId\").value;\n      axios.get(this.selfDomain + \"vueweb/get-states\", {\n        params: {\n          country_id: countryId\n        },\n        headers: {\n          Authorization: \"Bearer \" + this.auth.user.access_token\n        }\n      }).then(res => {\n        this.states = res.data;\n      });\n    },\n\n    get_city() {\n      stateId = document.getElementById(\"stateId\").value;\n      axios.get(this.selfDomain + \"vueweb/get-cities\", {\n        params: {\n          state_id: stateId\n        },\n        headers: {\n          Authorization: \"Bearer \" + this.auth.user.access_token\n        }\n      }).then(res => {\n        this.cities = res.data;\n      });\n    },\n\n    getMap() {\n      // navigator.permissions.query({ name: 'geolocation' })\n      // .then(permissionStatus => {\n      //     if (permissionStatus.state === 'granted') {\n      //         this.$getLocation()\n      //         .then((coordinates) => {\n      //             console.log(\"okkk\");\n      //             this.coordinate = coordinates;\n      //         })\n      //         .catch((error) => {\n      //             console.log(error);\n      //         });\n      //     } else {\n      //       console.log(\"no permission\");\n      //     }\n      // })\n      // .catch(error => {\n      //     console.log('Error checking geolocation permission:', error);\n      // });\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(position => {// latitude.value = position.coords.latitude;\n          // longitude.value = position.coords.longitude;\n          // console.log(position);\n        }, err => {// error.value = err.message;\n          // console.log(err);\n        });\n      } else {\n        console.log('Geolocation is not supported by this browser.');\n      }\n    },\n\n    storeAddress() {\n      let address = document.getElementById(\"address\").value;\n      let country_id = document.getElementById(\"countryId\").value;\n      let state_id = document.getElementById(\"stateId\").value;\n      let city_id = document.getElementById(\"cityId\").value;\n      let longitude = 0;\n      let latitude = 0;\n      let postal_code = document.getElementById(\"postalCode\").value;\n      let phone = document.getElementById(\"phone\").value;\n      axios.get(this.selfDomain + \"vueweb/address-store\", {\n        params: {\n          address: address,\n          country_id: country_id,\n          state_id: state_id,\n          city_id: city_id,\n          longitude: longitude,\n          latitude: latitude,\n          postal_code: postal_code,\n          phone: phone\n        },\n        headers: {\n          Authorization: \"Bearer \" + this.auth.user.access_token\n        }\n      }).then(res => {\n        console.log(res.data);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","data","auth","isAuthenticated","user","coordinate","lat","lan","countries","states","cities","created","localStorage","getItem","JSON","parse","ele","document","getElementsByTagName","classList","add","getAddressInfo","methods","hidModal","emitter","emit","remove","get","selfDomain","headers","Authorization","access_token","then","response","get_states","countryId","getElementById","value","params","country_id","res","get_city","stateId","state_id","getMap","navigator","geolocation","getCurrentPosition","position","err","console","log","storeAddress","address","city_id","longitude","latitude","postal_code","phone"],"sourceRoot":"","sources":["E:\\adminDeal\\src\\components\\layouts\\Modal\\addressModal.vue"],"sourcesContent":["<template>\r\n    <a @click=\"hidModal()\" class=\"sb-lightbox-overlay; pointer: normal;\" style=\" position: fixed;width: 100%;height: 100%;top: 0;right: 0;left: 0;bottom: 0;z-index: 100;background-color: rgba(0, 0, 0, 0.6);display: block;animation: sb-fade-animation;\"></a>\r\n    <div class=\"modal fade show\" style=\"z-index: 1040; display: block; padding-right: 17px;\" id=\"new-address-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"exampleModalLabel\">{{ 'New Address' }}</h5>\r\n                <button @click=\"hidModal()\" type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n            <form class=\"form-default\" role=\"form\" action=\"{{'addresses.store' }}\" method=\"POST\">\r\n                <div class=\"modal-body\">\r\n                    <div class=\"p-3\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-2\">\r\n                                <label>{{ 'Address'}}</label>\r\n                            </div>\r\n                            <div class=\"col-md-10\">\r\n                                <textarea id=\"address\" class=\"form-control mb-3\" placeholder=\"'Your Address'\" rows=\"2\" name=\"address\" required></textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-2\">\r\n                                <label>{{ 'Country'}}</label>\r\n                            </div>\r\n                            <div class=\"col-md-10\">\r\n                                <div class=\"mb-3\">\r\n                                    <select id=\"countryId\" @change=\"get_states()\" class=\"form-control aiz-selectpicker\" data-live-search=\"true\" data-placeholder=\"Select your country\" name=\"country_id\" required>\r\n                                        <option  value=\"\">{{ 'Select your country' }}</option>\r\n                                        \r\n                                            <option v-for=\"(country, index) in countries\" :key=\"index\" :value=\"country.id\">{{ country.name }}</option>\r\n                                        \r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-2\">\r\n                                <label>{{ 'State'}}</label>\r\n                            </div>\r\n                            <div class=\"col-md-10\">\r\n                                <select id=\"stateId\" @change=\"get_city()\" class=\"form-control mb-3 aiz-selectpicker\" data-live-search=\"true\" name=\"state_id\" required>\r\n                                    <option value=\"\">Select State</option>\r\n                                    <option v-for=\"(state, index) in states\" :key=\"index\" :value=\"state.id\">{{state.name}}</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-2\">\r\n                                <label>{{ 'City'}}</label>\r\n                            </div>\r\n                            <div class=\"col-md-10\">\r\n                                <select id=\"cityId\" class=\"form-control mb-3 aiz-selectpicker\" data-live-search=\"true\" name=\"city_id\" required>\r\n                                    <option value=\"\">Select City</option>\r\n                                    <option v-for=\"(city, index) in cities\" :key=\"index\" :value=\"city.id\">{{city.name}}</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- @if (get_setting('google_map') == 1)\r\n                            <div class=\"row\">\r\n                                <input id=\"searchInput\" class=\"controls\" type=\"text\" placeholder=\"{{'Enter a location'}}\">\r\n                                <div id=\"map\"></div>\r\n                                <ul id=\"geoData\">\r\n                                    <li style=\"display: none;\">Full Address: <span id=\"location\"></span></li>\r\n                                    <li style=\"display: none;\">Postal Code: <span id=\"postal_code\"></span></li>\r\n                                    <li style=\"display: none;\">Country: <span id=\"country\"></span></li>\r\n                                    <li style=\"display: none;\">Latitude: <span id=\"lat\"></span></li>\r\n                                    <li style=\"display: none;\">Longitude: <span id=\"lon\"></span></li>\r\n                                </ul>\r\n                            </div>\r\n\r\n                            <div class=\"row\">\r\n                                <div class=\"col-md-2\" id=\"\">\r\n                                    <label for=\"exampleInputuname\">Longitude</label>\r\n                                </div>\r\n                                <div class=\"col-md-10\" id=\"\">\r\n                                    <input type=\"text\" class=\"form-control mb-3\" id=\"longitude\" name=\"longitude\" readonly=\"\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col-md-2\" id=\"\">\r\n                                    <label for=\"exampleInputuname\">Latitude</label>\r\n                                </div>\r\n                                <div class=\"col-md-10\" id=\"\">\r\n                                    <input type=\"text\" class=\"form-control mb-3\" id=\"latitude\" name=\"latitude\" readonly=\"\">\r\n                                </div>\r\n                            </div>\r\n                        @endif -->\r\n                        \r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-2\">\r\n                                <label>{{ 'Postal code'}}</label>\r\n                            </div>\r\n                            <div class=\"col-md-10\">\r\n                                <input id=\"postalCode\" type=\"text\" class=\"form-control mb-3\" placeholder=\"Your Postal Code\" name=\"postal_code\" value=\"\" required>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-2\">\r\n                                <label>{{ 'Phone'}}</label>\r\n                            </div>\r\n                            <div class=\"col-md-10\">\r\n                                <input id=\"phone\" type=\"text\" class=\"form-control mb-3\" placeholder=\"+880\" name=\"phone\" value=\"\" required>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"form-group text-right\">\r\n                            <button @click=\"storeAddress()\" type=\"button\" class=\"btn btn-sm btn-primary\">{{'Save'}}</button>\r\n                        </div>\r\n\r\n                        <!-- <h1>Location</h1>\r\n                        <h1><span>{{ coordinate.lat }}</span><span>{{ coordinate.lan }}</span></h1> -->\r\n\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n<div class=\"modal fade\" id=\"edit-address-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"exampleModalLabel\">{{ 'New Address' }}</h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class=\"modal-body\" id=\"edit_modal_body\">\r\n    \r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n</template>\r\n\r\n<!-- <script src=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyBx8Ged-Hntnvs9kfv48zUnathey0QxvXI&libraries=places&language=en&callback=initialize\" async defer></script> -->\r\n<script>\r\nimport axios from 'axios';\r\n\r\n\r\nexport default {\r\n    data(){\r\n      return{\r\n        auth:{\r\n            isAuthenticated: false,\r\n            user: {},\r\n        },\r\n        coordinate:{\r\n            lat: 0,\r\n            lan: 0,\r\n        },\r\n        countries:[],\r\n        states:[],\r\n        cities:[],\r\n\r\n        }\r\n    },\r\n    created(){\r\n      var user = localStorage.getItem(\"user\");\r\n        if(user !== null){\r\n            user = JSON.parse(user);\r\n            this.auth.isAuthenticated = true;\r\n            this.auth.user = user;\r\n            let ele = document.getElementsByTagName('body');\r\n            ele[0].classList.add(\"modal-open\");\r\n            this.getAddressInfo();\r\n            // this.getMap();\r\n        }\r\n        \r\n\r\n\r\n    },\r\n    methods:{\r\n        hidModal(){\r\n            this.emitter.emit(\"addressModal\", false);\r\n            let ele = document.getElementsByTagName('body');\r\n            ele[0].classList.remove(\"modal-open\");\r\n        },\r\n\r\n        getAddressInfo(){\r\n            axios.get(this.selfDomain+\"vueweb/checkout/get/address-info\", {\r\n              headers: {\r\n                Authorization: \"Bearer \" + this.auth.user.access_token,\r\n              }\r\n            })\r\n            .then((response)=>{\r\n               this.countries = response.data;\r\n            })\r\n        },\r\n        get_states() {\r\n            countryId = document.getElementById(\"countryId\").value;\r\n\r\n            axios.get(this.selfDomain+\"vueweb/get-states\", {\r\n              params:{\r\n                country_id: countryId,\r\n              },\r\n              headers: {\r\n                Authorization: \"Bearer \" + this.auth.user.access_token,\r\n              }\r\n            })\r\n            .then((res)=>{\r\n                this.states = res.data;\r\n            });\r\n\r\n           \r\n        },\r\n        get_city() {\r\n            stateId = document.getElementById(\"stateId\").value;\r\n\r\n            axios.get(this.selfDomain+\"vueweb/get-cities\", {\r\n              params:{\r\n                state_id: stateId,\r\n              },\r\n              headers: {\r\n                Authorization: \"Bearer \" + this.auth.user.access_token,\r\n              }\r\n            })\r\n            .then((res)=>{\r\n                this.cities = res.data;\r\n            });\r\n        },\r\n        getMap(){\r\n           \r\n            \r\n\r\n            // navigator.permissions.query({ name: 'geolocation' })\r\n            // .then(permissionStatus => {\r\n            //     if (permissionStatus.state === 'granted') {\r\n            //         this.$getLocation()\r\n            //         .then((coordinates) => {\r\n            //             console.log(\"okkk\");\r\n            //             this.coordinate = coordinates;\r\n            //         })\r\n            //         .catch((error) => {\r\n            //             console.log(error);\r\n            //         });\r\n            //     } else {\r\n            //       console.log(\"no permission\");\r\n            //     }\r\n            // })\r\n            // .catch(error => {\r\n            //     console.log('Error checking geolocation permission:', error);\r\n            // });\r\n\r\n\r\n\r\n            if (navigator.geolocation) {\r\n                navigator.geolocation.getCurrentPosition(\r\n                (position) => {\r\n                    // latitude.value = position.coords.latitude;\r\n                    // longitude.value = position.coords.longitude;\r\n                    // console.log(position);\r\n                },\r\n                (err) => {\r\n                    // error.value = err.message;\r\n                    // console.log(err);\r\n                }\r\n                );\r\n            } else {\r\n                console.log('Geolocation is not supported by this browser.');\r\n            }\r\n\r\n        },\r\n        storeAddress(){\r\n            let address       = document.getElementById(\"address\").value;\r\n            let country_id    = document.getElementById(\"countryId\").value;\r\n            let state_id      = document.getElementById(\"stateId\").value;\r\n            let city_id       = document.getElementById(\"cityId\").value;\r\n            let longitude     = 0\r\n            let latitude      = 0\r\n            let postal_code   = document.getElementById(\"postalCode\").value;\r\n            let phone         = document.getElementById(\"phone\").value;\r\n\r\n            axios.get(this.selfDomain+\"vueweb/address-store\", {\r\n              params:{\r\n                address:address,\r\n                country_id:country_id,\r\n                state_id:state_id,\r\n                city_id:city_id,\r\n                longitude:longitude,\r\n                latitude:latitude,\r\n                postal_code:postal_code,\r\n                phone:phone,\r\n              },\r\n              headers: {\r\n                Authorization: \"Bearer \" + this.auth.user.access_token,\r\n              }\r\n            })\r\n            .then((res)=>{\r\n                console.log(res.data);\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}