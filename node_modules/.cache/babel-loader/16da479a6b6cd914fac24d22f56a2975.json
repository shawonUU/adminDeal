{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  props: ['productId'],\n\n  data() {\n    return {\n      auth: {\n        isAuthenticated: false,\n        user: {}\n      },\n      productDetails: false,\n      addedTocart: false,\n      color: null,\n      quantity: 0,\n      preLoader: false\n    };\n  },\n\n  created() {\n    var user = localStorage.getItem(\"user\");\n\n    if (user !== null) {\n      user = JSON.parse(user);\n      this.auth.isAuthenticated = true;\n      this.auth.user = user;\n    }\n\n    this.getProductDetails();\n  },\n\n  methods: {\n    hidModal() {\n      this.emitter.emit(\"viewAddToCartModal\", false);\n      let ele = document.getElementsByTagName('body');\n      ele[0].classList.remove(\"modal-open\");\n    },\n\n    getProductDetails() {\n      this.preLoader = true;\n      axios.get(this.rootDomain + 'vueweb/cart/show-cart-modal?id=' + this.productId).then(res => {\n        console.log(res.data.productCollection.data[0]); // console.log(res.data);\n\n        this.productDetails = res.data.productCollection.data[0];\n        this.quantity = this.productDetails.min_qty; // console,log(res.data)\n\n        this.preLoader = false;\n        this.getVariantPrice();\n      }).catch(err => {});\n    },\n\n    getVariantPrice() {\n      let data;\n\n      if (this.color != null) {\n        data = {\n          id: this.productDetails.id,\n          quantity: this.quantity,\n          color: this.color\n        };\n      } else {\n        data = {\n          id: this.productDetails.id,\n          quantity: this.quantity\n        };\n      }\n\n      if (this.productDetails.min_qty > 0 && this.checkAddToCartValidity()) {\n        $.ajax({\n          type: \"get\",\n          url: this.rootDomain + 'vueweb/product-variant_price',\n          data: data,\n          success: function (data) {\n            $('.product-gallery-thumb .carousel-box').each(function (i) {\n              if ($(this).data('variation') && data.variation == $(this).data('variation')) {\n                $('.product-gallery-thumb').slick('slickGoTo', i);\n              }\n            });\n            $('#option-choice-form #chosen_price_div').removeClass('d-none');\n            $('#option-choice-form #chosen_price_div #chosen_price').html(data.price);\n            $('#available-quantity').html(data.quantity);\n            $('.input-number').prop('max', data.max_limit);\n\n            if (parseInt(data.in_stock) == 0 && data.digital == 0) {\n              $('.buy-now').addClass('d-none');\n              $('.add-to-cart').addClass('d-none');\n              $('.out-of-stock').removeClass('d-none');\n            } else {\n              $('.buy-now').removeClass('d-none');\n              $('.add-to-cart').removeClass('d-none');\n              $('.out-of-stock').addClass('d-none');\n            }\n          }\n        });\n      }\n    },\n\n    checkAddToCartValidity() {\n      var names = {};\n      $('#option-choice-form input:radio').each(function () {\n        // find unique names\n        names[$(this).attr('name')] = true;\n      });\n      var count = 0;\n      $.each(names, function () {\n        // then count them\n        count++;\n      });\n\n      if ($('#option-choice-form input:radio:checked').length == count) {\n        return true;\n      }\n\n      return false;\n    },\n\n    incresQuantity() {\n      this.quantity = this.quantity + 1;\n      if (this.quantity > this.productDetails.stocksQty) this.quantity = this.productDetails.stocksQty;\n      this.getVariantPrice();\n    },\n\n    decresQuantity() {\n      this.quantity = this.quantity - 1;\n      if (this.quantity < 1) this.quantity = 1;\n      this.getVariantPrice();\n    },\n\n    setQuantity() {\n      let qty = $(\"#quantity\").val();\n      if (qty < 1) qty = 1;\n      if (qty > this.productDetails.stocksQty) qty = this.productDetails.stocksQty;\n      this.quantity = qty;\n      this.getVariantPrice();\n    },\n\n    changeColor(color) {\n      this.color = color;\n      this.getVariantPrice();\n    },\n\n    addToCart() {\n      // console.log('##################');\n      if (this.auth.isAuthenticated == true && this.auth.user.type != 'customer') {\n        alert('Please Login as a customer to add products to the Cart.');\n        return false;\n      }\n\n      if (this.checkAddToCartValidity()) {\n        this.preLoader = true;\n        var temp_user = \"\";\n        var token = \"\";\n\n        if (this.auth.isAuthenticated == true) {\n          // alert('athentic');\n          token = this.auth.user.access_token;\n        } else {\n          // alert('');\n          var temp_user = localStorage.getItem(\"temp_user\");\n          if (!temp_user) temp_user = \"\";\n        }\n\n        let data;\n\n        if (this.color != null) {\n          data = {\n            id: this.productId,\n            quantity: this.quantity,\n            color: this.color,\n            token: token,\n            temp_user: temp_user\n          };\n        } else {\n          data = {\n            id: this.productId,\n            quantity: this.quantity,\n            token: token,\n            temp_user: temp_user\n          };\n        } // console.log(data);\n        // axios.defaults.headers.common['X-CSRF-TOKEN'] = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content');\n\n\n        axios.get(this.selfDomain + 'vueweb/cart/addtocart', {\n          params: data\n        }).then(res => {\n          // console.log(res);\n          this.productDetails = false;\n          this.preLoader = false; // console.log(\"********************\");\n          // console.log(res.data);return;\n\n          localStorage.setItem(\"temp_user\", res.data.temp_user); // console.log(\"ADDED\");\n          // console.log(res.data);\n\n          this.addedTocart = res.data;\n          this.addedTocart.product = this.addedTocart.product.data[0];\n          this.addedTocart.reletedProducts = this.addedTocart.reletedProducts.data;\n          this.emitter.emit(\"reload\", true);\n        }).catch(err => {}); // $.ajax({\n        //     type:\"get\",\n        //     url: this.rootDomain+'vueweb/cart/addtocart',\n        //     data: data,\n        //     success: function(data){\n        //        $('#addToCart-modal-body').html(null);\n        //        $('.c-preloader').hide();\n        //        $('#modal-size').removeClass('modal-lg');\n        //        $('#addToCart-modal-body').html(data.modal_view);\n        //        AIZ.extra.plusMinus();\n        //        AIZ.plugins.slickCarousel();\n        //        updateNavCart(data.nav_cart_view,data.cart_count);\n        //     //    this.addedTocart = \n        //     }\n        // });\n      } else {\n        alert('Please choose all the options');\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","props","data","auth","isAuthenticated","user","productDetails","addedTocart","color","quantity","preLoader","created","localStorage","getItem","JSON","parse","getProductDetails","methods","hidModal","emitter","emit","ele","document","getElementsByTagName","classList","remove","get","rootDomain","productId","then","res","console","log","productCollection","min_qty","getVariantPrice","catch","err","id","checkAddToCartValidity","$","ajax","type","url","success","each","i","variation","slick","removeClass","html","price","prop","max_limit","parseInt","in_stock","digital","addClass","names","attr","count","length","incresQuantity","stocksQty","decresQuantity","setQuantity","qty","val","changeColor","addToCart","alert","temp_user","token","access_token","selfDomain","params","setItem","product","reletedProducts"],"sourceRoot":"","sources":["F:\\adminDeal\\src\\components\\layouts\\Modal\\AddToCartModal.vue"],"sourcesContent":["\n\n\n<template >\n    <div @mousedown=\"hidModal()\" class=\"sb-lightbox-overlay\" style=\" position: fixed;width: 100%;height: 100%;top: 0;right: 0;left: 0;bottom: 0;z-index: 100;background-color: rgba(0, 0, 0, 0.6);display: block;animation: sb-fade-animation;\"></div>\n    <div  class=\"modal fade show\" id=\"addToCart\" style=\"z-index: 99999; display: block; padding-right: 17px;\" aria-modal=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered modal-dialog-zoom product-modal modal-lg\" id=\"modal-size\" role=\"document\">\n            <div class=\"modal-content position-relative\">\n                <div v-if=\"preLoader\" class=\"c-preloader text-center p-3\" >\n                    <i class=\"las la-spinner la-spin la-3x\"></i>\n                </div>\n                <button type=\"button\" class=\"close absolute-top-right btn-icon close z-1\" data-dismiss=\"modal\" aria-label=\"Close\">\n                    <span @click=\"hidModal()\" aria-hidden=\"true\" class=\"la-2x\">×</span>\n                </button>\n\n                <templete v-if=\"productDetails != false\">\n                    <div class=\"modal-body p-4 c-scrollbar-light\">\n                        <div class=\"row\">\n                            <div class=\"col-lg-6\">\n                                <div class=\"row gutters-10 flex-row-reverse\">\n                                \n                                    <div class=\"col\">\n                                        <div class=\"aiz-carousel product-gallery\" data-nav-for='.product-gallery-thumb' data-fade='true' data-auto-height='true'>\n                                            \n                                            <div v-for=\"(photo, index) in productDetails.photos\" :key=\"index\" class=\"carousel-box img-zoom rounded\">\n                                                <img v-if=\"photo.path != null\"\n                                                    class=\"img-fluid lazyload\"\n                                                    \n                                                    :src=\"photo.path\"\n                                                >\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class=\"col-auto w-90px\">\n                                        <div class=\"aiz-carousel carousel-thumb product-gallery-thumb\" data-items='5' data-nav-for='.product-gallery' data-vertical='true' data-focus-select='true'>\n                                            <div v-for=\"(photo, index) in productDetails.photos\" :key=\"index\" class=\"carousel-box c-pointer border p-1 rounded\">\n                                                <img v-if=\"photo.path != null\"\n                                                    class=\"lazyload mw-100 size-60px mx-auto\"\n                                                    :src=\"rootDomain+'assets/img/placeholder.jpg'\"\n                                                    :data-src=\"photo.path\"\n                                                >\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class=\"col-lg-6\">\n                                <div class=\"text-left\">\n                                    <h2 class=\"mb-2 fs-20 fw-600\">\n                                        {{  productDetails.name  }}\n                                    </h2>\n\n                                    <template v-if=\"productDetails.home_price != productDetails.home_discounted_price\">\n                                        <div class=\"row no-gutters mt-3\">\n                                            <div class=\"col-2\">\n                                                <div class=\"opacity-50 mt-2\">Price:</div>\n                                            </div>\n                                            <div class=\"col-10\">\n                                                <div class=\"fs-20 opacity-60\">\n                                                    <del>\n                                                        {{ productDetails.home_price }}\n                                                        <span v-if=\"productDetails.unit != null\">/{{ productDetails.unit }}</span>\n                                                    </del>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <div class=\"row no-gutters mt-2\">\n                                            <div class=\"col-2\">\n                                                <div class=\"opacity-50\">Discount Price:</div>\n                                            </div>\n                                            <div class=\"col-10\">\n                                                <div class=\"\">\n                                                    <strong class=\"h2 fw-600 text-primary\">\n                                                        {{ productDetails.home_discounted_price }}\n                                                    </strong>\n                                                    <span v-if=\"productDetails.unit != null\" class=\"opacity-70\">/{{ productDetails.unit }}</span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </template>\n                                    <template v-else>\n                                        <div class=\"row no-gutters mt-3\">\n                                            <div class=\"col-2\">\n                                                <div class=\"opacity-50\">Price:</div>\n                                            </div>\n                                            <div class=\"col-10\">\n                                                <div class=\"\">\n                                                    <strong class=\"h2 fw-600 text-primary\">\n                                                        {{ productDetails.home_discounted_price }}\n                                                    </strong>\n                                                    <span class=\"opacity-70\">/{{ productDetails.unit }}</span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </template>\n\n                                        <div v-if=\"productDetails.addon_is_activated && productDetails.earn_point > 0\" class=\"row no-gutters mt-4\">\n                                            <div class=\"col-2\">\n                                                <div class=\"opacity-50\">Cashback:</div>\n                                            </div>\n                                            <div class=\"col-10\">\n                                                <div class=\"d-inline-block club-point bg-soft-primary px-3 py-1 border\">\n                                                    <span class=\"strong-700\">{{ productDetails.earn_point }}</span>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                    <hr>\n\n                                    <form id=\"option-choice-form\">\n                                        \n                                        <!-- <input type=\"hidden\" name=\"id\" value=\"{{ productDetails.id }}\"> -->\n\n                                        <!-- Quantity + Add to cart -->\n                                        \n                                        <templete v-if=\"productDetails.digital != 1\">\n                                            <templete v-if=\"productDetails.choice_options != null\">\n\n                                                    <div v-for=\"(choice, index) in productDetails.choice_options\" :key=\"index\" class=\"row no-gutters\">\n                                                        <div class=\"col-2\">\n                                                            <div class=\"opacity-50 mt-2 \">{{ choice.name }}:</div>\n                                                        </div>\n                                                        <div class=\"col-10\">\n                                                            <div class=\"aiz-radio-inline\">\n                                                                <label v-for=\"(value, indexdn) in choice.options\" :key=\"indexdn\" class=\"aiz-megabox pl-0 mr-2\">\n                                                                    <input\n                                                                        type=\"radio\"\n                                                                        :name=\"'attribute_id_'+choice.id\"\n                                                                        :value=\"value\"\n                                                                        :checked=\"indexdn==0\"\n                                                                    >\n                                                                    <span class=\"aiz-megabox-elem rounded d-flex align-items-center justify-content-center py-2 px-3 mb-2\">\n                                                                        {{ value }}\n                                                                    </span>\n                                                                </label>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n\n                                            </templete>\n\n                                            <templete v-if=\"productDetails.colors.length > 0\">\n                                                <div class=\"row no-gutters\">\n                                                    <div class=\"col-2\">\n                                                        <div class=\"opacity-50 mt-2\">Color:</div>\n                                                    </div>\n                                                    <div class=\"col-10\">\n                                                        <div class=\"aiz-radio-inline\">\n                                                            <label v-for=\"(color, index) in productDetails.colors\" :key=\"index\" class=\"aiz-megabox pl-0 mr-2\" data-toggle=\"tooltip\" :ref=\"color.name\">\n                                                                <input\n                                                                    @click=\"changeColor(color.name)\"\n                                                                    type=\"radio\"\n                                                                    name=\"color\"\n                                                                    :value=\"color.name\"\n                                                                    :checked=\"index == 0\"\n                                                                >\n                                                                <span class=\"aiz-megabox-elem rounded d-flex align-items-center justify-content-center p-1 mb-2\">\n                                                                    <span class=\"size-30px d-inline-block rounded\" :style=\"'background:'+color+';'\"></span>\n                                                                </span>\n                                                            </label>\n                                                        </div>\n                                                    </div>\n                                                </div>\n\n                                                <hr>\n                                            </templete>\n\n                                            <div class=\"row no-gutters\">\n                                                <div class=\"col-2\">\n                                                    <div class=\"opacity-50 mt-2\">{{ 'Quantity'}}:</div>\n                                                </div>\n                                                <div class=\"col-10\">\n                                                    <div class=\"product-quantity d-flex align-items-center\">\n                                                        <div class=\"row no-gutters align-items-center aiz-plus-minus mr-3\" style=\"width: 130px;\">\n                                                            <button @click=\"decresQuantity()\" class=\"btn col-auto btn-icon btn-sm btn-circle btn-light\" type=\"button\" data-type=\"minus\" data-field=\"quantity\">\n                                                                <i class=\"las la-minus\"></i>\n                                                            </button>\n                                                            <input @change=\"setQuantity()\" id=\"quantity\" type=\"number\" name=\"quantity\" class=\"col border-0 text-center flex-grow-1 fs-16 input-number\" placeholder=\"1\" :value=\"quantity\"  lang=\"en\">\n                                                            <button @click=\"incresQuantity()\" class=\"btn  col-auto btn-icon btn-sm btn-circle btn-light\" type=\"button\" data-type=\"plus\" data-field=\"quantity\">\n                                                                <i class=\"las la-plus\"></i>\n                                                            </button>\n                                                        </div>\n                                                        <div class=\"avialable-amount opacity-60\">\n                                                            <templete v-if=\"productDetails.stock_visibility_state == 'quantity'\">\n                                                            (<span id=\"available-quantity\">{{ productDetails.stocksQty }}</span> {{ 'available' }})\n                                                            </templete>\n                                                            <templete v-if=\"productDetails.stock_visibility_state == 'text' && productDetails.stocksQty >= 1\">\n                                                                (<span id=\"available-quantity\">{{ 'In Stock' }}</span>)\n                                                            </templete>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <hr>\n                                        </templete>\n\n                                        <div class=\"row no-gutters pb-3 \" id=\"chosen_price_div\">\n                                            <div class=\"col-2\">\n                                                <div class=\"opacity-50\">{{ 'Total Price' }}:</div>\n                                            </div>\n                                            <div class=\"col-10\">\n                                                <div class=\"product-price\">\n                                                    <strong id=\"chosen_price\" class=\"h4 fw-600 text-primary\">\n\n                                                    </strong>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                    </form>\n                                    <div class=\"mt-3\">\n                                        <templete v-if=\"productDetails.digital == 1\">\n                                            <button  type=\"button\" class=\"btn btn-primary buy-now fw-600 add-to-cart\" @click=\"addToCart()\">\n                                                <i class=\"la la-shopping-cart\"></i>\n                                                <span class=\"d-none d-md-inline-block\">{{ 'Add to cart'}}</span>\n                                            </button>\n                                        </templete>\n                                        <templete v-if=\"productDetails.stocksQty > 0\">\n                                            <templete v-if=\"productDetails.external_link != null\">\n                                                <!--<a type=\"button\" class=\"btn btn-soft-primary mr-2 add-to-cart fw-600\" href=\"{{ $product->external_link }}\">-->\n                                                <!--    <i class=\"las la-share\"></i>-->\n                                                <!--    <span class=\"d-none d-md-inline-block\">{{ translate($product->external_link_btn)}}</span>-->\n                                                <!--</a>-->\n                                                <button type=\"button\" class=\"btn btn-primary buy-now fw-600 add-to-cart\" @click=\"addToCart()\">\n                                                    <i class=\"la la-shopping-cart\"></i>\n                                                    <span class=\"d-none d-md-inline-block\">{{ 'Add to cart' }}</span>\n                                                </button>\n                                            </templete>\n                                            <templete v-else>\n                                                <button type=\"button\" class=\"btn btn-primary buy-now fw-600 add-to-cart\" @click=\"addToCart()\">\n                                                    <i class=\"la la-shopping-cart\"></i>\n                                                    <span class=\"d-none d-md-inline-block\">{{ 'Add to cart'}}</span>\n                                                </button>\n                                            </templete>\n                                        </templete>\n                                        <button type=\"button\" class=\"btn btn-secondary out-of-stock fw-600 d-none\" disabled>\n                                            <i class=\"la la-cart-arrow-down\"></i>{{ 'Out of Stock' }}\n                                        </button>\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </templete>\n\n\n<templete v-if=\"addedTocart != false\">\n    <templete v-if=\"addedTocart.templete == 'addedToCart'\">\n        <div class=\"modal-body p-4 added-to-cart\">\n            <div class=\"text-center text-success mb-4\">\n                <i class=\"las la-check-circle la-3x\"></i>\n                <h3>{{ 'Item added to your cart!'}} {{ addedTocart.cart_count }}</h3>\n            </div>\n            <div class=\"media mb-4\">\n                <img :src=\"addedTocart.product.thumbnail_image\" class=\"mr-3 lazyload size-100px img-fit rounded\" alt=\"Product Image\">\n                <div class=\"media-body pt-3 text-left\">\n                    <h6 class=\"fw-600\">\n                        {{  addedTocart.product.name }}\n                    </h6>\n                    <div class=\"row mt-3\">\n                        <div class=\"col-sm-2 opacity-60\">\n                            <div>{{ 'Price' }}:</div>\n                        </div>\n                        <div class=\"col-sm-10\">\n                            <div class=\"h6 text-primary\">\n                                <strong>\n                                    {{ addedTocart.single_price }}\n                                </strong>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"bg-white rounded shadow-sm\">\n                <div class=\"border-bottom p-3\">\n                    <h3 class=\"fs-16 fw-600 mb-0\">\n                        <span class=\"mr-4\">{{ 'Frequently Bought Together'}}</span>\n                    </h3>\n                </div>\n                <div class=\"p-3\">\n                    <div class=\"aiz-carousel gutters-5 half-outside-arrow\" data-items=\"2\" data-xl-items=\"3\" data-lg-items=\"4\"  data-md-items=\"3\" data-sm-items=\"2\" data-xs-items=\"2\" data-arrows='true' data-infinite='true'>\n                        <div v-for=\"(related_product, index) in addedTocart.reletedProducts\" :key=\"index\" class=\"carousel-box\">\n                            <div class=\"aiz-card-box border border-light rounded hov-shadow-md my-2 has-transition\">\n                                <div class=\"\">\n                                    <a href=\"javascript:void(0)\" class=\"d-block\">\n                                        <img\n                                            class=\"img-fit lazyload mx-auto h-140px h-md-210px\"\n                                            :src=\"related_product.thumbnail_image\"\n                                            :alt=\"related_product.name\"\n                                        >\n                                        \n                                    </a>\n                                </div>\n                                <div class=\"p-md-3 p-2 text-left\">\n                                    <div class=\"fs-15\">\n                                        <del v-if=\"related_product.base_price != related_product.base_discounted_price\" class=\"fw-600 opacity-50 mr-1\">{{ related_product.base_price }}</del>\n                                        <span class=\"fw-700 text-primary\">{{ related_product.base_discounted_price }}</span>\n                                    </div>\n                                    <div class=\"rating rating-sm mt-1\">\n                                        <!-- {{ renderStarRating($related_product->rating) }} -->\n                                        *****\n                                    </div>\n                                    <h3 class=\"fw-600 fs-13 text-truncate-2 lh-1-4 mb-0 h-35px\">\n                                        <a href=\"javascript:void(0)\" class=\"d-block text-reset\">{{ related_product.name }}</a>\n                                    </h3>\n                                   \n                                        <div v-if=\"addedTocart.addon_is_activated\" class=\"rounded px-2 mt-2 bg-soft-primary border-soft-primary border\">\n                                            {{ 'Club Point' }}:\n                                            <span class=\"fw-700 float-right\">{{ related_product.earn_point }}</span>\n                                        </div>\n                                   \n                                </div>\n                            </div>\n                        </div>\n                       \n                    </div>\n                </div>\n            </div>\n            <div class=\"text-center\">\n                <button class=\"btn btn-outline-primary mb-3 mb-sm-0\" data-dismiss=\"modal\">{{ 'Back to shopping'}}</button>\n                <a href=\"javascript:void(0)\" class=\"btn btn-primary mb-3 mb-sm-0\">{{ 'Proceed to Checkout'}}</a>\n                <!-- {{ route('cart') }} -->\n            </div>\n        </div>\n\n    </templete>\n    <templete v-if=\"addedTocart.templete == 'minQtyNotSatisfied'\">\n        <div class=\"modal-body p-4 added-to-cart\">\n            <div class=\"text-center text-danger\">\n                <h2>{{'oops..'}}</h2>\n                <h3>{{'You have to add minimum '+addedTocart.min_qty+' products!'}}</h3>\n            </div>\n            <div class=\"text-center mt-5\">\n                <button class=\"btn btn-outline-primary\" data-dismiss=\"modal\">{{'Back to shopping'}}</button>\n            </div>\n        </div>\n    </templete>\n    <templete v-if=\"addedTocart.templete == 'outOfStockCart'\">\n        <div class=\"modal-body p-4 added-to-cart\">\n            <div class=\"text-center text-danger\">\n                <h2>{{'oops..'}}</h2>\n                <h3>{{'This item is out of stock!'}}</h3>\n            </div>\n            <div class=\"text-center mt-5\">\n                <button class=\"btn btn-outline-primary\" data-dismiss=\"modal\">{{'Back to shopping'}}</button>\n            </div>\n        </div>\n    </templete>\n    <templete v-if=\"addedTocart.templete == 'auctionProductAlredayAddedCart'\">\n        <div class=\"modal-body p-4 added-to-cart\">\n            <div class=\"text-center text-danger\">\n                <h2>{{'oops..'}}</h2>\n                <h3>{{'Remove auction product from cart to add this product.'}}</h3>\n            </div>\n            <div class=\"text-center mt-5\">\n                <button class=\"btn btn-outline-primary\" data-dismiss=\"modal\">{{'Back to shopping'}}</button>\n            </div>\n        </div>\n    </templete>\n</templete>\n\n\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n    props:['productId'],\n    data(){\n        return{\n            auth:{\n                isAuthenticated: false,\n                user: {},\n            },\n            productDetails: false,\n            addedTocart: false,\n            color: null,\n            quantity: 0,\n            preLoader: false,\n        }\n    },\n    created(){\n        var user = localStorage.getItem(\"user\");\n        if(user !== null){\n            user = JSON.parse(user);\n            this.auth.isAuthenticated = true;\n            this.auth.user = user;\n        }\n        this.getProductDetails();\n    },\n    methods:{\n        hidModal(){\n           this.emitter.emit(\"viewAddToCartModal\", false); \n           let ele = document.getElementsByTagName('body');\n           ele[0].classList.remove(\"modal-open\");\n        },\n        getProductDetails(){\n            this.preLoader = true;\n            axios.get(this.rootDomain+'vueweb/cart/show-cart-modal?id='+this.productId)\n            .then(res=>{\n                console.log(res.data.productCollection.data[0]);\n                // console.log(res.data);\n                this.productDetails = res.data.productCollection.data[0];\n                this.quantity = this.productDetails.min_qty;\n                // console,log(res.data)\n                \n                this.preLoader = false;\n                this.getVariantPrice();\n\n            }).catch(err=>{\n\n            });\n        },\n\n        getVariantPrice(){\n            let data;\n            if(this.color != null){data = {id: this.productDetails.id, quantity: this.quantity, color:this.color};}\n            else{data = {id: this.productDetails.id, quantity: this.quantity};}\n          \n            if(this.productDetails.min_qty > 0 && this.checkAddToCartValidity()){\n                $.ajax({\n                   type:\"get\",\n                   url: this.rootDomain+'vueweb/product-variant_price',\n                   data: data,\n                   success: function(data){\n                        $('.product-gallery-thumb .carousel-box').each(function (i) {\n                            if($(this).data('variation') && data.variation == $(this).data('variation')){\n                                $('.product-gallery-thumb').slick('slickGoTo', i);\n                            }\n                        })\n\n                        $('#option-choice-form #chosen_price_div').removeClass('d-none');\n                        $('#option-choice-form #chosen_price_div #chosen_price').html(data.price);\n                        $('#available-quantity').html(data.quantity);\n                        $('.input-number').prop('max', data.max_limit);\n                        if(parseInt(data.in_stock) == 0 && data.digital  == 0){\n                           $('.buy-now').addClass('d-none');\n                           $('.add-to-cart').addClass('d-none');\n                           $('.out-of-stock').removeClass('d-none');\n                        }\n                        else{\n                           $('.buy-now').removeClass('d-none');\n                           $('.add-to-cart').removeClass('d-none');\n                           $('.out-of-stock').addClass('d-none');\n                        }\n                   }\n               });\n            }\n        },\n        checkAddToCartValidity(){\n            var names = {};\n            $('#option-choice-form input:radio').each(function() { // find unique names\n                names[$(this).attr('name')] = true;\n            });\n            var count = 0;\n            $.each(names, function() { // then count them\n                count++;\n            });\n\n            if($('#option-choice-form input:radio:checked').length == count){\n                return true;\n            }\n            return false;\n        },\n\n        incresQuantity(){\n             this.quantity = this.quantity + 1;\n            if( this.quantity > this.productDetails.stocksQty)  \n                this.quantity = this.productDetails.stocksQty;\n            this.getVariantPrice();\n        },\n        decresQuantity(){\n            this.quantity = this.quantity - 1;\n            if( this.quantity<1)  this.quantity = 1;\n            this.getVariantPrice();\n        },\n        setQuantity(){\n            let qty = $(\"#quantity\").val();\n            if(qty<1) qty = 1;\n            if(qty > this.productDetails.stocksQty) \n                qty = this.productDetails.stocksQty;\n            this.quantity = qty;\n            this.getVariantPrice();\n        },\n        changeColor(color){\n            this.color = color;\n             this.getVariantPrice();\n        },\n        addToCart(){\n            // console.log('##################');\n            if(this.auth.isAuthenticated==true &&  this.auth.user.type != 'customer'){\n                alert('Please Login as a customer to add products to the Cart.');\n                return false;\n            }\n\n            if(this.checkAddToCartValidity()) {\n               \n                this.preLoader = true;\n\n                var temp_user = \"\";\n                var token = \"\";\n                if(this.auth.isAuthenticated==true){\n                    // alert('athentic');\n                    token = this.auth.user.access_token;\n                }else{\n                    // alert('');\n                    var temp_user = localStorage.getItem(\"temp_user\");\n                    if(!temp_user) temp_user = \"\";\n                }\n                \n\n                let data;\n                if(this.color != null){data = {id: this.productId, quantity: this.quantity, color: this.color, token:token, temp_user:temp_user};}\n                else{data = {id: this.productId, quantity: this.quantity, token:token, temp_user:temp_user};}\n\n                // console.log(data);\n\n                // axios.defaults.headers.common['X-CSRF-TOKEN'] = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content');\n                axios.get(this.selfDomain+'vueweb/cart/addtocart',{params: data})\n                .then(res=>{\n                    // console.log(res);\n                    this.productDetails = false;\n                    this.preLoader = false;\n                    // console.log(\"********************\");\n                    // console.log(res.data);return;\n                    localStorage.setItem(\"temp_user\", res.data.temp_user);\n                    // console.log(\"ADDED\");\n                    // console.log(res.data);\n                    this.addedTocart = res.data;\n                    this.addedTocart.product = this.addedTocart.product.data[0];\n                    this.addedTocart.reletedProducts = this.addedTocart.reletedProducts.data;\n                    this.emitter.emit(\"reload\", true);\n\n                }).catch(err=>{\n\n                });\n\n                // $.ajax({\n                //     type:\"get\",\n                //     url: this.rootDomain+'vueweb/cart/addtocart',\n                //     data: data,\n                //     success: function(data){\n\n                //        $('#addToCart-modal-body').html(null);\n                //        $('.c-preloader').hide();\n                //        $('#modal-size').removeClass('modal-lg');\n                //        $('#addToCart-modal-body').html(data.modal_view);\n                //        AIZ.extra.plusMinus();\n                //        AIZ.plugins.slickCarousel();\n                //        updateNavCart(data.nav_cart_view,data.cart_count);\n                //     //    this.addedTocart = \n                //     }\n                // });\n            }\n            else{\n                alert('Please choose all the options');\n            }\n        }\n\n        \n\n\n    }\n}\n</script>\n<style>\n\nelement {\n  z-index: 1040;\n  display: block;\n  padding-right: 17px;\n}\n.modal-open .modal {\n  overflow-x: hidden;\n  overflow-y: hidden;\n}\n.modal-open .modal {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 100;\n  display: none;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  outline: 0;\n}\n.fade {\n  transition: opacity .15s linear;\n}\n*, ::after, ::before {\n  box-sizing: border-box;\n}\n</style>"]},"metadata":{},"sourceType":"module"}