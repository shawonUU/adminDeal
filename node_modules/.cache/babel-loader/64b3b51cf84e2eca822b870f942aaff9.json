{"ast":null,"code":"/*!\r\n * express\r\n * Copyright(c) 2009-2013 TJ Holowaychuk\r\n * Copyright(c) 2013 Roman Shtylman\r\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\r\n * MIT Licensed\r\n */\n'use strict';\n/**\r\n * Module dependencies.\r\n * @private\r\n */\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nvar pathRegexp = require('path-to-regexp');\n\nvar debug = require('debug')('express:router:layer');\n/**\r\n * Module variables.\r\n * @private\r\n */\n\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\r\n * Module exports.\r\n * @public\r\n */\n\nmodule.exports = Layer;\n\nfunction Layer(path, options, fn) {\n  if (!(this instanceof Layer)) {\n    return new Layer(path, options, fn);\n  }\n\n  debug('new %o', path);\n  var opts = options || {};\n  this.handle = fn;\n  this.name = fn.name || '<anonymous>';\n  this.params = undefined;\n  this.path = undefined;\n  this.regexp = pathRegexp(path, this.keys = [], opts); // set fast path flags\n\n  this.regexp.fast_star = path === '*';\n  this.regexp.fast_slash = path === '/' && opts.end === false;\n}\n/**\r\n * Handle the error for the layer.\r\n *\r\n * @param {Error} error\r\n * @param {Request} req\r\n * @param {Response} res\r\n * @param {function} next\r\n * @api private\r\n */\n\n\nLayer.prototype.handle_error = function handle_error(error, req, res, next) {\n  var fn = this.handle;\n\n  if (fn.length !== 4) {\n    // not a standard error handler\n    return next(error);\n  }\n\n  try {\n    fn(error, req, res, next);\n  } catch (err) {\n    next(err);\n  }\n};\n/**\r\n * Handle the request for the layer.\r\n *\r\n * @param {Request} req\r\n * @param {Response} res\r\n * @param {function} next\r\n * @api private\r\n */\n\n\nLayer.prototype.handle_request = function handle(req, res, next) {\n  var fn = this.handle;\n\n  if (fn.length > 3) {\n    // not a standard request handler\n    return next();\n  }\n\n  try {\n    fn(req, res, next);\n  } catch (err) {\n    next(err);\n  }\n};\n/**\r\n * Check if this route matches `path`, if so\r\n * populate `.params`.\r\n *\r\n * @param {String} path\r\n * @return {Boolean}\r\n * @api private\r\n */\n\n\nLayer.prototype.match = function match(path) {\n  var match;\n\n  if (path != null) {\n    // fast path non-ending match for / (any path matches)\n    if (this.regexp.fast_slash) {\n      this.params = {};\n      this.path = '';\n      return true;\n    } // fast path for * (everything matched in a param)\n\n\n    if (this.regexp.fast_star) {\n      this.params = {\n        '0': decode_param(path)\n      };\n      this.path = path;\n      return true;\n    } // match the path\n\n\n    match = this.regexp.exec(path);\n  }\n\n  if (!match) {\n    this.params = undefined;\n    this.path = undefined;\n    return false;\n  } // store values\n\n\n  this.params = {};\n  this.path = match[0];\n  var keys = this.keys;\n  var params = this.params;\n\n  for (var i = 1; i < match.length; i++) {\n    var key = keys[i - 1];\n    var prop = key.name;\n    var val = decode_param(match[i]);\n\n    if (val !== undefined || !hasOwnProperty.call(params, prop)) {\n      params[prop] = val;\n    }\n  }\n\n  return true;\n};\n/**\r\n * Decode param value.\r\n *\r\n * @param {string} val\r\n * @return {string}\r\n * @private\r\n */\n\n\nfunction decode_param(val) {\n  if (typeof val !== 'string' || val.length === 0) {\n    return val;\n  }\n\n  try {\n    return decodeURIComponent(val);\n  } catch (err) {\n    if (err instanceof URIError) {\n      err.message = 'Failed to decode param \\'' + val + '\\'';\n      err.status = err.statusCode = 400;\n    }\n\n    throw err;\n  }\n}","map":{"version":3,"names":["pathRegexp","require","debug","hasOwnProperty","Object","prototype","module","exports","Layer","path","options","fn","opts","handle","name","params","undefined","regexp","keys","fast_star","fast_slash","end","handle_error","error","req","res","next","length","err","handle_request","match","decode_param","exec","i","key","prop","val","call","decodeURIComponent","URIError","message","status","statusCode"],"sources":["E:/adminDeal/node_modules/express/lib/router/layer.js"],"sourcesContent":["/*!\r\n * express\r\n * Copyright(c) 2009-2013 TJ Holowaychuk\r\n * Copyright(c) 2013 Roman Shtylman\r\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\r\n * MIT Licensed\r\n */\r\n\r\n'use strict';\r\n\r\n/**\r\n * Module dependencies.\r\n * @private\r\n */\r\n\r\nvar pathRegexp = require('path-to-regexp');\r\nvar debug = require('debug')('express:router:layer');\r\n\r\n/**\r\n * Module variables.\r\n * @private\r\n */\r\n\r\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\r\n\r\n/**\r\n * Module exports.\r\n * @public\r\n */\r\n\r\nmodule.exports = Layer;\r\n\r\nfunction Layer(path, options, fn) {\r\n  if (!(this instanceof Layer)) {\r\n    return new Layer(path, options, fn);\r\n  }\r\n\r\n  debug('new %o', path)\r\n  var opts = options || {};\r\n\r\n  this.handle = fn;\r\n  this.name = fn.name || '<anonymous>';\r\n  this.params = undefined;\r\n  this.path = undefined;\r\n  this.regexp = pathRegexp(path, this.keys = [], opts);\r\n\r\n  // set fast path flags\r\n  this.regexp.fast_star = path === '*'\r\n  this.regexp.fast_slash = path === '/' && opts.end === false\r\n}\r\n\r\n/**\r\n * Handle the error for the layer.\r\n *\r\n * @param {Error} error\r\n * @param {Request} req\r\n * @param {Response} res\r\n * @param {function} next\r\n * @api private\r\n */\r\n\r\nLayer.prototype.handle_error = function handle_error(error, req, res, next) {\r\n  var fn = this.handle;\r\n\r\n  if (fn.length !== 4) {\r\n    // not a standard error handler\r\n    return next(error);\r\n  }\r\n\r\n  try {\r\n    fn(error, req, res, next);\r\n  } catch (err) {\r\n    next(err);\r\n  }\r\n};\r\n\r\n/**\r\n * Handle the request for the layer.\r\n *\r\n * @param {Request} req\r\n * @param {Response} res\r\n * @param {function} next\r\n * @api private\r\n */\r\n\r\nLayer.prototype.handle_request = function handle(req, res, next) {\r\n  var fn = this.handle;\r\n\r\n  if (fn.length > 3) {\r\n    // not a standard request handler\r\n    return next();\r\n  }\r\n\r\n  try {\r\n    fn(req, res, next);\r\n  } catch (err) {\r\n    next(err);\r\n  }\r\n};\r\n\r\n/**\r\n * Check if this route matches `path`, if so\r\n * populate `.params`.\r\n *\r\n * @param {String} path\r\n * @return {Boolean}\r\n * @api private\r\n */\r\n\r\nLayer.prototype.match = function match(path) {\r\n  var match\r\n\r\n  if (path != null) {\r\n    // fast path non-ending match for / (any path matches)\r\n    if (this.regexp.fast_slash) {\r\n      this.params = {}\r\n      this.path = ''\r\n      return true\r\n    }\r\n\r\n    // fast path for * (everything matched in a param)\r\n    if (this.regexp.fast_star) {\r\n      this.params = {'0': decode_param(path)}\r\n      this.path = path\r\n      return true\r\n    }\r\n\r\n    // match the path\r\n    match = this.regexp.exec(path)\r\n  }\r\n\r\n  if (!match) {\r\n    this.params = undefined;\r\n    this.path = undefined;\r\n    return false;\r\n  }\r\n\r\n  // store values\r\n  this.params = {};\r\n  this.path = match[0]\r\n\r\n  var keys = this.keys;\r\n  var params = this.params;\r\n\r\n  for (var i = 1; i < match.length; i++) {\r\n    var key = keys[i - 1];\r\n    var prop = key.name;\r\n    var val = decode_param(match[i])\r\n\r\n    if (val !== undefined || !(hasOwnProperty.call(params, prop))) {\r\n      params[prop] = val;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\n/**\r\n * Decode param value.\r\n *\r\n * @param {string} val\r\n * @return {string}\r\n * @private\r\n */\r\n\r\nfunction decode_param(val) {\r\n  if (typeof val !== 'string' || val.length === 0) {\r\n    return val;\r\n  }\r\n\r\n  try {\r\n    return decodeURIComponent(val);\r\n  } catch (err) {\r\n    if (err instanceof URIError) {\r\n      err.message = 'Failed to decode param \\'' + val + '\\'';\r\n      err.status = err.statusCode = 400;\r\n    }\r\n\r\n    throw err;\r\n  }\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;;;;AAEA,IAAIA,UAAU,GAAGC,OAAO,CAAC,gBAAD,CAAxB;;AACA,IAAIC,KAAK,GAAGD,OAAO,CAAC,OAAD,CAAP,CAAiB,sBAAjB,CAAZ;AAEA;AACA;AACA;AACA;;;AAEA,IAAIE,cAAc,GAAGC,MAAM,CAACC,SAAP,CAAiBF,cAAtC;AAEA;AACA;AACA;AACA;;AAEAG,MAAM,CAACC,OAAP,GAAiBC,KAAjB;;AAEA,SAASA,KAAT,CAAeC,IAAf,EAAqBC,OAArB,EAA8BC,EAA9B,EAAkC;EAChC,IAAI,EAAE,gBAAgBH,KAAlB,CAAJ,EAA8B;IAC5B,OAAO,IAAIA,KAAJ,CAAUC,IAAV,EAAgBC,OAAhB,EAAyBC,EAAzB,CAAP;EACD;;EAEDT,KAAK,CAAC,QAAD,EAAWO,IAAX,CAAL;EACA,IAAIG,IAAI,GAAGF,OAAO,IAAI,EAAtB;EAEA,KAAKG,MAAL,GAAcF,EAAd;EACA,KAAKG,IAAL,GAAYH,EAAE,CAACG,IAAH,IAAW,aAAvB;EACA,KAAKC,MAAL,GAAcC,SAAd;EACA,KAAKP,IAAL,GAAYO,SAAZ;EACA,KAAKC,MAAL,GAAcjB,UAAU,CAACS,IAAD,EAAO,KAAKS,IAAL,GAAY,EAAnB,EAAuBN,IAAvB,CAAxB,CAZgC,CAchC;;EACA,KAAKK,MAAL,CAAYE,SAAZ,GAAwBV,IAAI,KAAK,GAAjC;EACA,KAAKQ,MAAL,CAAYG,UAAZ,GAAyBX,IAAI,KAAK,GAAT,IAAgBG,IAAI,CAACS,GAAL,KAAa,KAAtD;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAb,KAAK,CAACH,SAAN,CAAgBiB,YAAhB,GAA+B,SAASA,YAAT,CAAsBC,KAAtB,EAA6BC,GAA7B,EAAkCC,GAAlC,EAAuCC,IAAvC,EAA6C;EAC1E,IAAIf,EAAE,GAAG,KAAKE,MAAd;;EAEA,IAAIF,EAAE,CAACgB,MAAH,KAAc,CAAlB,EAAqB;IACnB;IACA,OAAOD,IAAI,CAACH,KAAD,CAAX;EACD;;EAED,IAAI;IACFZ,EAAE,CAACY,KAAD,EAAQC,GAAR,EAAaC,GAAb,EAAkBC,IAAlB,CAAF;EACD,CAFD,CAEE,OAAOE,GAAP,EAAY;IACZF,IAAI,CAACE,GAAD,CAAJ;EACD;AACF,CAbD;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEApB,KAAK,CAACH,SAAN,CAAgBwB,cAAhB,GAAiC,SAAShB,MAAT,CAAgBW,GAAhB,EAAqBC,GAArB,EAA0BC,IAA1B,EAAgC;EAC/D,IAAIf,EAAE,GAAG,KAAKE,MAAd;;EAEA,IAAIF,EAAE,CAACgB,MAAH,GAAY,CAAhB,EAAmB;IACjB;IACA,OAAOD,IAAI,EAAX;EACD;;EAED,IAAI;IACFf,EAAE,CAACa,GAAD,EAAMC,GAAN,EAAWC,IAAX,CAAF;EACD,CAFD,CAEE,OAAOE,GAAP,EAAY;IACZF,IAAI,CAACE,GAAD,CAAJ;EACD;AACF,CAbD;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEApB,KAAK,CAACH,SAAN,CAAgByB,KAAhB,GAAwB,SAASA,KAAT,CAAerB,IAAf,EAAqB;EAC3C,IAAIqB,KAAJ;;EAEA,IAAIrB,IAAI,IAAI,IAAZ,EAAkB;IAChB;IACA,IAAI,KAAKQ,MAAL,CAAYG,UAAhB,EAA4B;MAC1B,KAAKL,MAAL,GAAc,EAAd;MACA,KAAKN,IAAL,GAAY,EAAZ;MACA,OAAO,IAAP;IACD,CANe,CAQhB;;;IACA,IAAI,KAAKQ,MAAL,CAAYE,SAAhB,EAA2B;MACzB,KAAKJ,MAAL,GAAc;QAAC,KAAKgB,YAAY,CAACtB,IAAD;MAAlB,CAAd;MACA,KAAKA,IAAL,GAAYA,IAAZ;MACA,OAAO,IAAP;IACD,CAbe,CAehB;;;IACAqB,KAAK,GAAG,KAAKb,MAAL,CAAYe,IAAZ,CAAiBvB,IAAjB,CAAR;EACD;;EAED,IAAI,CAACqB,KAAL,EAAY;IACV,KAAKf,MAAL,GAAcC,SAAd;IACA,KAAKP,IAAL,GAAYO,SAAZ;IACA,OAAO,KAAP;EACD,CA1B0C,CA4B3C;;;EACA,KAAKD,MAAL,GAAc,EAAd;EACA,KAAKN,IAAL,GAAYqB,KAAK,CAAC,CAAD,CAAjB;EAEA,IAAIZ,IAAI,GAAG,KAAKA,IAAhB;EACA,IAAIH,MAAM,GAAG,KAAKA,MAAlB;;EAEA,KAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,KAAK,CAACH,MAA1B,EAAkCM,CAAC,EAAnC,EAAuC;IACrC,IAAIC,GAAG,GAAGhB,IAAI,CAACe,CAAC,GAAG,CAAL,CAAd;IACA,IAAIE,IAAI,GAAGD,GAAG,CAACpB,IAAf;IACA,IAAIsB,GAAG,GAAGL,YAAY,CAACD,KAAK,CAACG,CAAD,CAAN,CAAtB;;IAEA,IAAIG,GAAG,KAAKpB,SAAR,IAAqB,CAAEb,cAAc,CAACkC,IAAf,CAAoBtB,MAApB,EAA4BoB,IAA5B,CAA3B,EAA+D;MAC7DpB,MAAM,CAACoB,IAAD,CAAN,GAAeC,GAAf;IACD;EACF;;EAED,OAAO,IAAP;AACD,CA9CD;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASL,YAAT,CAAsBK,GAAtB,EAA2B;EACzB,IAAI,OAAOA,GAAP,KAAe,QAAf,IAA2BA,GAAG,CAACT,MAAJ,KAAe,CAA9C,EAAiD;IAC/C,OAAOS,GAAP;EACD;;EAED,IAAI;IACF,OAAOE,kBAAkB,CAACF,GAAD,CAAzB;EACD,CAFD,CAEE,OAAOR,GAAP,EAAY;IACZ,IAAIA,GAAG,YAAYW,QAAnB,EAA6B;MAC3BX,GAAG,CAACY,OAAJ,GAAc,8BAA8BJ,GAA9B,GAAoC,IAAlD;MACAR,GAAG,CAACa,MAAJ,GAAab,GAAG,CAACc,UAAJ,GAAiB,GAA9B;IACD;;IAED,MAAMd,GAAN;EACD;AACF"},"metadata":{},"sourceType":"script"}